<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <springProperty scope="context" name="APP_NAME" source="spring.application.name"/>
    <springProperty scope="context" name="HOST" source="graylog.host"/>
    <springProperty scope="context" name="PORT" source="graylog.port"/>

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d %-5level [${APP_NAME}] %logger [%c{10}] - %.-10000msg%n</pattern>
        </encoder>
    </appender>

    <appender name="GRAYLOG" class="de.siegmar.logbackgelf.GelfUdpAppender">
        <graylogHost>${HOST}</graylogHost>
        <graylogPort>${PORT}</graylogPort>
        <encoder class="de.siegmar.logbackgelf.GelfEncoder">
            <staticField>service_name:${APP_NAME}</staticField>
            <fullPatternLayout>
                <pattern>%d %-5level [${APP_NAME}] %logger [%c{10}] - %.-10000msg%n</pattern>
            </fullPatternLayout>
        </encoder>
    </appender>

    <springProfile name="default">
        <root level="INFO">
            <appender-ref ref="STDOUT"/>
            <appender-ref ref="GRAYLOG"/>
        </root>
    </springProfile>
</configuration>
