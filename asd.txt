<route id="getMethodStartTime">
			<description>Запоминает время начала выполнения метода</description>
			<from uri="direct:getMethodStartTime"/>
			<setProperty name="methodStartTime">
				<simple>${date:now:yyyy-MM-dd HH:mm:ss.SSS}</simple>
			</setProperty>
			<setProperty name="methodStartTimestamp">
				<groovy>System.currentTimeMillis()</groovy>
			</setProperty>
		</route>

		<route id="logMethodTiming">
			<description>Логирует время выполнения метода</description>
			<from uri="direct:logMethodTiming"/>
			<choice>
				<when>
					<simple>${exchangeProperty.methodName} == null</simple>
					<setProperty name="methodName">
						<simple>anonymous_method</simple>
					</setProperty>
				</when>
			</choice>

			<setProperty name="methodEndTime">
				<simple>${date:now:yyyy-MM-dd HH:mm:ss.SSS}</simple>
			</setProperty>
			<setProperty name="executionTimeMs">
				<groovy>
					(System.currentTimeMillis() - exchange.properties.methodStartTimestamp)
				</groovy>
			</setProperty>

			<process ref="mdcResponseTimeProcessor"/>
			<log message="[TIMING] Method: ${exchangeProperty.methodName} Start: ${exchangeProperty.methodStartTime}
			   End: ${exchangeProperty.methodEndTime} Duration: ${exchangeProperty.executionTimeMs} ms
				 Info: ${exchangeProperty.logInfo}"
				loggingLevel="INFO"/>
			<process ref="mdcResponseTimeDeleteProcessor"/>
		</route>
