<rest>
    <!-- DELETE /deletePackage -->
    <post path="/v2/gate_rr_adapter/deletePackage">
        <description>Удаление пакета</description>
        <param name="Authorization" type="header" required="true" description="Токен авторизации (Bearer)"/>
        <param name="body" type="body" description="json - запрос подробности см. документацию" required="true"/>
        <to uri="direct:deletePackageRoute"/>
    </post>

    <!-- GET /getArchive -->
    <post path="/v2/gate_rr_adapter/getArchive">
        <description>Получить архив пакета</description>
        <param name="Authorization" type="header" required="true" description="Токен авторизации (Bearer)"/>
        <param name="body" type="body" description="json - запрос подробности см. документацию" required="true"/>
        <to uri="direct:getArchiveRoute"/>
    </post>

    <!-- GET /getDocument -->
    <get path="/v2/gate_rr_adapter/getDocument">
        <description>Получение документа</description>
        <param name="packageId" description="Номер пакета" type="query" required="true"/>
        <param name="documentId" description="Номер документа" type="query" required="true"/>
        <param name="Authorization" type="header" required="true" description="Токен авторизации (Bearer)"/>
        <to uri="direct:getDocumentRoute"/>
    </get>

    <!-- GET /getConsumer -->
    <get path="/v2/gate_rr_adapter/getConsumer">
        <description>Получение потребителя</description>
        <param name="Authorization" type="header" required="true" description="Токен авторизации (Bearer)"/>
        <to uri="direct:getConsumerRoute"/>
    </get>
</rest>

<camelContext ...>
    <!-- Маршрут для deletePackage -->
    <route id="direct:deletePackageRoute">
        <setProperty name="methodName">
            <simple>deletePackage</simple>
        </setProperty>
        <to uri="direct:getMethodStartTime"/>
        <to uri="log:ru.seventech.esb.technoprom.deletePackage.v2.start?showAll=true"/>
        <setProperty name="rosrgatewayToken">
            <method ref="authService" method="getToken"/>
        </setProperty>
        <doTry>
            <to uri="direct:ru.seventech.esb.technoprom.prepareRequest.v2"/>
            <unmarshal>
                <json library="Jackson" unmarshalType="java.util.HashMap"/>
            </unmarshal>
            <setProperty name="packageId">
                <simple>${body.get("packageId")}</simple>
            </setProperty>
            <setHeader name="CamelHttpMethod">
                <constant>DELETE</constant>
            </setHeader>
            <setHeader name="Authorization">
                <simple>${exchangeProperty.rosrgatewayToken}</simple>
            </setHeader>
            <setBody>
                <simple>${null}</simple>
            </setBody>
            <setProperty name="deletePackageUrl">
                <simple>{{env:url_deletePackage_v2}}</simple>
            </setProperty>
            <setProperty name="deletePackageUrlWithUid">
                <groovy>
                    String.format(exchange.properties.deletePackageUrl, exchange.properties.packageId)
                </groovy>
            </setProperty>
            <toD uri="https://${exchangeProperty.deletePackageUrlWithUid}?httpClientConfigurer=trustAllHttpClientConfigurer"/>
            <convertBodyTo type="java.lang.String"/>
            <to uri="log:ru.seventech.esb.technoprom.deletePackage.v2.afterRequest?showAll=true"/>
            <setBody>
                <groovy>[removedPackageId: exchange.properties.packageId]</groovy>
            </setBody>
            <marshal>
                <json library="Jackson"/>
            </marshal>
            <setProperty name="logInfo">
                <simple>${exchangeProperty.packageId}</simple>
            </setProperty>
            <to uri="direct:logMethodTiming"/>
            <to uri="log:ru.seventech.esb.technoprom.deletePackage.v2.end?showAll=true"/>
            <doCatch>
                <exception>org.apache.camel.http.common.HttpOperationFailedException</exception>
                <to uri="log:ru.seventech.esb.technoprom.deletePackage.v2.error?showAll=true"/>
                <setHeader name="Exchange.HTTP_RESPONSE_CODE">
                    <constant>400</constant>
                </setHeader>
                <setBody>
                    <simple>${exception.getResponseBody()}</simple>
                </setBody>
            </doCatch>
        </doTry>
    </route>

    <!-- Маршрут для getArchive -->
    <route id="direct:getArchiveRoute">
        ... [аналогичные исправления: unmarshalTypeName → unmarshalType, вынос логики]
    </route>

    <!-- Маршрут для getDocument -->
    <route id="direct:getDocumentRoute">
        ... [исправление параметров запроса]
    </route>

    <!-- Маршрут для getConsumer -->
    <route id="direct:getConsumerRoute">
        ... [удаление вложенного route]
    </route>
</camelContext>
